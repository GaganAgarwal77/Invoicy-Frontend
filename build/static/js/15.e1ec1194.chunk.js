(this.webpackJsonpinvoicy=this.webpackJsonpinvoicy||[]).push([[15],{163:function(e,t,n){"use strict";function c(e){return e&&"object"===typeof e&&"default"in e?e.default:e}var a=n(0),r=c(a),s=c(n(1)),o=c(n(59));function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},l.apply(this,arguments)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t){if(null==e)return{};var n,c,a=function(e,t){if(null==e)return{};var n,c,a={},r=Object.keys(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],c=!0,a=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(c=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);c=!0);}catch(i){a=!0,r=i}finally{try{c||null==o.return||o.return()}finally{if(a)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,c=new Array(t);n<t;n++)c[n]=e[n];return c}var p=function(e){var t=e.classes,n=e.onChange,c=e.onMouseUpOrTouchEnd,a=e.onTouchEnd,s=e.onMouseUp,o=h(e,["classes","onChange","onMouseUpOrTouchEnd","onTouchEnd","onMouseUp"]);return r.createElement("input",l({type:"range",onChange:function(e){return n(e,e.target.valueAsNumber)},onMouseUp:function(e){c(e),s&&s(e)},onTouchEnd:function(e){c(e),a&&a(e)},className:t},o))};p.propTypes={classes:s.string.isRequired,onChange:s.func.isRequired,onMouseUpOrTouchEnd:s.func.isRequired,onTouchEnd:s.func,onMouseUp:s.func};var m=r.memo(p),f=r.forwardRef((function(e,t){var n=e.size,c=e.disabled,s=void 0!==c&&c,i=e.value,u=e.onChange,b=void 0===u?function(){}:u,p=e.onAfterChange,f=void 0===p?function(){}:p,O=e.min,x=void 0===O?0:O,v=e.max,g=void 0===v?100:v,y=e.step,w=e.variant,k=void 0===w?"primary":w,N=e.inputProps,C=void 0===N?{}:N,S=e.tooltip,A=void 0===S?"auto":S,E=e.tooltipPlacement,I=void 0===E?"bottom":E,P=e.tooltipLabel,_=e.tooltipStyle,T=void 0===_?{}:_,D=e.tooltipProps,U=void 0===D?{}:D,M=e.bsPrefix,R=e.className,z=j(a.useState(),2),W=z[0],q=z[1],B=M||"range-slider",H="auto"===A||"on"===A,J=o(R,B,n&&"".concat(B,"--").concat(n),s&&"disabled",k&&"".concat(B,"--").concat(k)),L=C.onMouseUp,V=C.onTouchEnd,$=h(C,["onMouseUp","onTouchEnd"]),F=a.useCallback((function(e){W!==e.target.value&&f(e,e.target.valueAsNumber),q(e.target.value)}),[W,f]),G=r.createElement(m,d({disabled:s,value:i,min:x,max:g,ref:t,step:y,classes:J,onMouseUpOrTouchEnd:F,onTouchEnd:V,onMouseUp:L,onChange:b},$)),K=o("".concat(B,"__wrap"),n&&"".concat(B,"__wrap--").concat(n)),Q=o("".concat(B,"__tooltip"),H&&"".concat(B,"__tooltip--").concat(A),I&&"".concat(B,"__tooltip--").concat(I),s&&"".concat(B,"__tooltip--disabled")),X=(i-x)/(g-x),Y=100*X,Z=2*(X-.5)*-("sm"===n?8:"lg"===n?12:10);return r.createElement("span",{className:K},G,H&&r.createElement("div",l({className:Q,style:d(d({},T||{}),{},{left:"calc(".concat(Y,"% + ").concat(Z,"px)")})},U),r.createElement("div",{className:"".concat(B,"__tooltip__label")},P?P(i):i),r.createElement("div",{className:"".concat(B,"__tooltip__arrow")})))})),O="undefined"===typeof O?function(){}:O;f.propTypes={value:s.oneOfType([s.number,s.string]),onChange:s.func,onAfterChange:s.func,min:s.number,max:s.number,step:s.number,disabled:s.bool,size:s.oneOf(["sm","lg"]),variant:s.oneOf(["primary","secondary","success","danger","warning","info","dark","light"]),inputProps:s.object,tooltip:s.oneOf(["auto","on","off"]),tooltipPlacement:s.oneOf(["top","bottom"]),tooltipLabel:s.func,tooltipStyle:s.object,tooltipProps:s.object,className:s.string,ref:s.oneOfType([s.func,s.shape({current:s.instanceOf(O)})]),bsPrefix:s.string},e.exports=f},668:function(e,t,n){"use strict";n.r(t);var c=n(23),a=n(2),r=n(85),s=n(11),o=n(12),i=n(13),l=n(14),u=n(71),d=n.n(u),h=n(0),j=n.n(h),b=n(161),p=n(127),m=n(102),f=n(155),O=n(162),x=n(26),v=n(103),g=n(105),y=n.n(g),w=n(163),k=n.n(w),N=n(73),C=n(3),S=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(e){var c;return Object(s.a)(this,n),(c=t.call(this,e)).clientId=c.props.match.params.id,c.state={clientId:c.props.match.params.id,companyId:window.localStorage.getItem("user_id"),client:{},invoices:[],discount:0},c}return Object(o.a)(n,[{key:"getInvoices",value:function(){var e=Object(r.a)(d.a.mark((function e(){var t,n,r,s,o,i,l=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.getAuth("/users/id/".concat(this.state.clientId,"/"),window.localStorage.getItem("token"));case 3:return t=e.sent,n=t.data,e.next=7,N.a.getAuth("/client-invoice/".concat(this.state.clientId,"/"),window.localStorage.getItem("token"));case 7:return r=e.sent,s=r.data,e.next=11,N.a.getAuth("/client/".concat(this.state.clientId,"/"),window.localStorage.getItem("token"));case 11:o=e.sent,i=o.data,console.log(s),console.log(i),s.forEach((function(e){e=Object(a.a)(Object(a.a)({},e),{},{clientName:n.company_name,clientEmail:n.email}),l.setState({client:Object(a.a)(Object(a.a)({},n),{},{discount:i.discount,blocked:i.blocked}),invoices:[].concat(Object(c.a)(l.state.invoices),[e])})})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0);case 21:case"end":return e.stop()}}),e,this,[[0,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getInvoices()}},{key:"updateDiscount",value:function(){var e=Object(r.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.patchAuth("/client/".concat(this.state.clientId,"/"),{discount:t},window.localStorage.getItem("token"));case 2:n=e.sent,console.log(n),n?(this.setState({client:Object(a.a)(Object(a.a)({},this.state.client),{},{discount:t})}),this.dialog.showAlert("Success")):this.dialog.showAlert("Something went wrong!");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"blockClient",value:function(){var e=Object(r.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.patchAuth("/client/".concat(this.state.clientId,"/"),{blocked:!this.state.client.blocked},window.localStorage.getItem("token"));case 2:t=e.sent,console.log(t),t?(this.setState({client:Object(a.a)(Object(a.a)({},this.state.client),{},{blocked:!this.state.client.blocked})}),this.dialog.showAlert("Success")):this.dialog.showAlert("Something went wrong!");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateWorkStatus",value:function(){var e=Object(r.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.patchAuth("/invoice/".concat(t,"/"),{workCompleted:"true"},window.localStorage.getItem("token"));case 2:n=e.sent,console.log(n),n?(this.dialog.showAlert("Success!"),window.location.reload()):this.dialog.showAlert("Something went wrong!");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"viewDetails",value:function(e){this.props.history.push({pathname:"/view-invoice/",state:{invoice:e}})}},{key:"render",value:function(){var e=this,t=[],n=[];return this.state.invoices.forEach((function(c){0==c.dueAmount?n.push(Object(C.jsxs)("tr",{className:"unread",children:[Object(C.jsx)("td",{children:Object(C.jsx)("img",{className:"rounded-circle",style:{width:"40px"},src:v.a,alt:"activity-user"})}),Object(C.jsxs)("td",{children:[Object(C.jsx)("h6",{className:"mb-1",children:c.clientName}),Object(C.jsx)("p",{className:"m-0",children:c.clientEmail})]}),Object(C.jsx)("td",{children:Object(C.jsxs)("h6",{className:"text-muted",children:[Object(C.jsx)("i",{className:"fa fa-circle text-c-green f-10 m-r-15"}),c.invoiceDate]})}),Object(C.jsx)("td",{children:Object(C.jsxs)("h6",{className:"text-muted",children:[Object(C.jsx)("i",{className:"fa fa-circle text-c-red f-10 m-r-15"}),c.dueDate]})}),Object(C.jsx)("td",{children:Object(C.jsxs)("h6",{className:"text-muted",children:["Work Status: \xa0",c.workCompleted&&Object(C.jsx)("span",{className:"text-success",children:"Completed"}),!c.workCompleted&&Object(C.jsx)("span",{className:"text-danger",children:"Not Completed"})]})}),Object(C.jsx)("td",{children:Object(C.jsxs)("h6",{className:"text-muted",children:[c.totalAmount," INR"]})}),Object(C.jsxs)("td",{children:[Object(C.jsx)("button",{style:{border:0},onClick:function(){return e.viewDetails(c)},className:"label theme-bg2 text-white f-12",children:"View Details"}),Object(C.jsxs)("button",{style:{border:0},onClick:function(){return e.updateWorkStatus(c.id)},className:"label theme-bg text-white f-12",children:[!c.workCompleted&&"Update Progress",c.workCompleted&&"Delete Progress"]})]})]},c.id)):t.push(Object(C.jsxs)("tr",{className:"unread",children:[Object(C.jsx)("td",{children:Object(C.jsx)("img",{className:"rounded-circle",style:{width:"40px"},src:v.a,alt:"activity-user"})}),Object(C.jsxs)("td",{children:[Object(C.jsx)("h6",{className:"mb-1",children:c.clientName}),Object(C.jsx)("p",{className:"m-0",children:c.clientEmail})]}),Object(C.jsx)("td",{children:Object(C.jsxs)("h6",{className:"text-muted",children:[Object(C.jsx)("i",{className:"fa fa-circle text-c-green f-10 m-r-15"}),c.invoiceDate]})}),Object(C.jsx)("td",{children:Object(C.jsxs)("h6",{className:"text-muted",children:[Object(C.jsx)("i",{className:"fa fa-circle text-c-red f-10 m-r-15"}),c.dueDate]})}),Object(C.jsx)("td",{children:Object(C.jsxs)("h6",{className:"text-muted",children:["Work Status: \xa0",c.workCompleted&&Object(C.jsx)("span",{className:"text-success",children:"Completed"}),!c.workCompleted&&Object(C.jsx)("span",{className:"text-danger",children:"Not Completed"})]})}),Object(C.jsx)("td",{children:Object(C.jsxs)("h6",{className:"text-muted",children:[c.dueAmount," INR due"]})}),Object(C.jsxs)("td",{children:[Object(C.jsx)("button",{style:{border:0},onClick:function(){return e.viewDetails(c)},className:"label theme-bg2 text-white f-12",children:"View Details"}),Object(C.jsxs)("button",{style:{border:0},onClick:function(){return e.updateWorkStatus(c.id)},className:"label theme-bg text-white f-12",children:[!c.workCompleted&&"Update Progress",c.workCompleted&&"Delete Progress"]}),Object(C.jsx)("button",{style:{border:0},onClick:function(){e.dialog.showAlert("Reminder sent!")},className:"label theme-bg text-white f-12",children:"Remind"}),Object(C.jsx)(y.a,{ref:function(t){e.dialog=t}})]})]},c.id))})),Object(C.jsx)(x.a,{children:Object(C.jsxs)(b.a,{children:[Object(C.jsxs)(p.a,{md:12,xl:12,children:[Object(C.jsx)("div",{className:"justify-content-center text-center",children:Object(C.jsx)("img",{className:"rounded-circle",style:{width:"140px"},src:v.a,alt:"user"})}),Object(C.jsxs)("div",{className:"mt-3 text-center",children:[Object(C.jsx)("h4",{className:"mb-0",children:this.state.client.company_name}),Object(C.jsx)("span",{className:"text-muted d-block mb-2",children:this.state.client.email}),Object(C.jsx)("span",{className:"text-muted d-block mb-2",children:this.state.client.username}),Object(C.jsxs)("h5",{className:"mb-3",children:["Discount: ",this.state.client.discount," %"]}),Object(C.jsx)("span",{children:Object(C.jsx)(k.a,{value:this.state.discount,onChange:function(t){return e.setState({discount:t.target.value})}})}),Object(C.jsx)(m.a,{size:"sm",onClick:function(){e.updateDiscount(e.state.discount)},children:"Update Discount"})]})]}),Object(C.jsx)(p.a,{md:12,xl:12,children:Object(C.jsxs)(f.a,{className:"Recent-Users mt-5",children:[Object(C.jsx)(f.a.Header,{children:Object(C.jsx)(f.a.Title,{as:"h5",children:"Pending Invoices"})}),Object(C.jsx)(f.a.Body,{className:"px-0 py-2",children:Object(C.jsx)(O.a,{responsive:!0,hover:!0,children:Object(C.jsx)("tbody",{children:t})})})]})}),Object(C.jsx)(p.a,{md:12,xl:12,children:Object(C.jsxs)(f.a,{className:"Recent-Users",children:[Object(C.jsx)(f.a.Header,{children:Object(C.jsx)(f.a.Title,{as:"h5",children:"Settled Invoices"})}),Object(C.jsx)(f.a.Body,{className:"px-0 py-2",children:Object(C.jsx)(O.a,{responsive:!0,hover:!0,children:Object(C.jsx)("tbody",{children:n})})})]})}),!this.state.client.blocked&&Object(C.jsx)(p.a,{md:12,xl:12,children:Object(C.jsxs)("div",{className:"justify-content-center text-center",children:[Object(C.jsx)(m.a,{variant:"danger",onClick:function(){return e.blockClient()},children:"Block Client"}),Object(C.jsx)(y.a,{ref:function(t){e.dialog=t}})]})}),this.state.client.blocked&&Object(C.jsx)(p.a,{md:12,xl:12,children:Object(C.jsxs)("div",{className:"justify-content-center text-center",children:[Object(C.jsx)(m.a,{variant:"primary",onClick:function(){return e.blockClient()},children:"Unblock Client"}),Object(C.jsx)(y.a,{ref:function(t){e.dialog=t}})]})})]})})}}]),n}(j.a.Component);t.default=S},73:function(e,t,n){"use strict";var c=n(11),a=n(12),r=n(685),s="http://localhost:8000",o=function(){function e(){Object(c.a)(this,e)}return Object(a.a)(e,[{key:"get",value:function(e){return r.a.get(s+e)}},{key:"getAuth",value:function(e,t){return r.a.get(s+e,{headers:{Authorization:"Token "+t}})}},{key:"post",value:function(e,t){return r.a.post(s+e,t)}},{key:"postAuth",value:function(e,t,n){return r.a.post(s+e,t,{headers:{Authorization:"Token "+n}})}},{key:"put",value:function(e,t){return r.a.put(s+e,t)}},{key:"patchAuth",value:function(e,t,n){return r.a.patch(s+e,t,{headers:{Authorization:"Token "+n}})}},{key:"delete",value:function(e){return r.a.delete(s+e)}}]),e}();t.a=new o}}]);
//# sourceMappingURL=15.e1ec1194.chunk.js.map